<div class="user-profile-form" data-controller="profile-picture-upload">
  <div class="user-profile-picture">
    <% if current_user.avatar.attached? %>
      <%= cl_image_tag current_user.avatar.key, height: 180, width: 180, crop: :fill, data: { "profile-picture-upload-target" => "profilePicture" } %>
    <% else %>
      <%= image_tag "unknown_avatar.jpg" %>
    <% end %>
  </div>
  <%= simple_form_for(current_user) do |f| %>
    <%= f.input :nickname, label: "Nickname", placeholder: "Enter your nickname", required: false %>
    <%= f.input :avatar, as: :file, label: "Upload new profile picture", input_html: { data: { action: "input->profile-picture-upload#changePicture" } } %>
    <%= f.submit "Save", class: "event-button w-50", style: "margin: 2rem auto;" %>
  <% end %>
</div>