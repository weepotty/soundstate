<% playlists.each do |playlist| %>
  <div class="profile-wrapper" data-controller="profile-modal" data-profile-modal-faris-value="hello">
    <div class="profile-card" data-controller="profile-card" data-action="click->profile-card#click">
      <div class="profile-scene scene--card" data-action="click->profile-modal#open">
        <div class="card" data-profile-card-target="card">
          <div class="profile_card__face profile_card__face--front">
            <div class="profile-card">
              <%= cl_image_tag playlist.photo.key %>
            </div>
          </div>
          <div class="profile_card__face profile_card__face--back">
              <button class="btn-play"><i class="fa-solid fa-play"></i></button>
          </div>
        </div>
      </div>
    </div>

    <section class="profile-modal hidden" data-profile-modal-target="modal" style="margin:0 auto">
      <div class="modal-container" data-controller="share-button" data-share-button-shared-value="<%= playlist.is_shared %>" data-share-button-faris-value="<%= playlist.id %>">
        <div class="d-flex justify-content-between align-items-center">
          <h1 class="m-0"><%= playlist.title %></h1>

          <% if playlist.is_shared %>
            <i class="fa-solid fa-lock"
              data-share-button-target="share"
              data-action="click->share-button#share"
            ></i>
            <p>Hide Playlist</p>
          <% else %>
            <i class="fa-solid fa-lock-open"
              data-share-button-target="share"
              data-action="click->share-button#share"
            ></i>
            <p>Show Playlist</p>
          <% end %>

          <span data-action="click->profile-modal#close">X</span>
        </div>
        <%= playlist.spotify_id %>
        <%= playlist.id %>
        <iframe id="playlist-show" style="border-radius:12px" src=<%= "https://open.spotify.com/embed/playlist/#{playlist.spotify_id}?utm_source=generator&theme=0" %> width="100%" height="1000" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>
    </section>
  </div>
<% end %>
